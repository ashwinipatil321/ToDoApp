var todoApp = angular.module('ToDo');
todoApp.controller('homeController', function($scope, toastr, $interval,homeService,
		loginService,$state,$http) {
	
	$scope.signout = function() {

		localStorage.removeItem('token');
		$location.path("/login");
	}

	$scope.addNote=function(){
		var message= homeService.service('POST','/saveNote',$scope.note);
		console.log("its coming here");

		message.then(function(response) {
			$scope.note="";

			getNotes();

		},function(response){
			getNotes();
			$scope.note="";
			console.log("some thing happening");
		});
	}
	var getNotes = function() {

		var notes = homeService.Notes('GET','user/getAllNotes');
		console.log("in this function");
		notes.then(function(response) {
	        console.log(response.data);
			$scope.notes = response.data;
		}, function(response) {

			$scope.error = response.data.message;
		});
		 
	}
	
	var showNotes = function() {

		var notes = homeService.showNotes('GET','/getAllNotes');
		console.log("in this function");
		
		notes.then(function(response) {
			console.log(response.data);
			$scope.notes = response.data;
		}, function(response) {

			$scope.error = response.data.message;
		});

	}
});