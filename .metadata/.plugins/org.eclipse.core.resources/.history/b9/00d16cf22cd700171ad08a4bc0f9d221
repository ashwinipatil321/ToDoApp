var toDoApp = angular.module('TodoApp');

toDoApp.controller('resetController', function($scope, forgotpasswordService,
		$location) {

	$scope.sendLink = function (response) {
		
		var httpSendLink = forgotpasswordService.sendLinkToEmail($scope.user);
		httpSendLink.then(function(CustomResponse) {
			
			if (CustomResponse.data.status == 5) {
				$scope.CustomResponse = 'INVALID USER!!!';
				
			} else if (CustomResponse.data.status == -1) {
				$scope.CustomResponse = 'MAIL NOT SENT!!!';
			} else if (CustomResponse.data.status == 1) {
		
				$location.path('/resetpassword');
			}
		});
	}

	$scope.resetPassword = function() {
		var httpReset = forgotpasswordService.resetPassword($scope.user);
		httpReset.then(function(response) {

			if (response.data.status == 5) {
				$scope.response = 'Probleam in token';
			} else if (response.data.status == -1) {
				$scope.response = 'PASSWORD NOT UPDATED';
			} else if (response.data.status == 1) {
				
			$location.path('/login');
			}
		});
	}
});