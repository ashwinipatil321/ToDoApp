var todoApp = angular.module('ToDo');
todoApp.controller('homeController', function($scope, toastr, $interval,
		loginService,$state,$http) {
	$scope.loginUser = function() {
		var result = loginService.loginUser($scope.user, $scope.error);
		result.then(function(response) {
			$state.go("home");
		}, function(response) {
			alert("Wrong user name password");
		});
	}
	$scope.showSidebar = function() {
		if ($scope.width == '0px') {
			$scope.width = '200px';
			$scope.leftmargin = "300px";
		} else {
			$scope.width = '0px';
			$scope.leftmargin = "0px";
		}
	}
		$scope.signout = function() {

			localStorage.removeItem('token');
			$location.path("/login");
	           }
		
		$scope.saveNote=function(){
		var message= homeService.service('POST','/saveNote',$scope.note);
	    console.log("its coming here");

		message.then(function(response) {
			$scope.note="";
		    
			getNotes();
			
			},function(response){
				getNotes();
				$scope.note="";
				console.log("some thing happening");
			});
		
	}
	var getNotes = function() {

		var notes = homeService.Notes('GET','/getAllNotes');
		console.log("in this function");
		notes.then(function(response) {
	        console.log(response.data);
			$scope.notes = response.data;
		}, function(response) {

			$scope.error = response.data.message;
		});
		 
	}
});